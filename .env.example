# Runtime locale
TIMEZONE=Europe/Rome
HEADLESS=false
HOUR_START=9
HOUR_END=18
DB_PATH=./data/linkedin_bot.sqlite
# In produzione SQLite è bloccato per default (guardrail): abilita solo se accetti esplicitamente il rischio.
ALLOW_SQLITE_IN_PRODUCTION=false
SESSION_DIR=./data/session
# Dashboard/API auth
# Auth attiva di default; richieste da IP trusted passano senza credenziali.
# Per accesso remoto imposta almeno DASHBOARD_API_KEY oppure BASIC user/password.
DASHBOARD_AUTH_ENABLED=true
DASHBOARD_API_KEY=
DASHBOARD_BASIC_USER=
DASHBOARD_BASIC_PASSWORD=
# Lista IP separati da virgola (oltre a 127.0.0.1 sempre consentito)
DASHBOARD_TRUSTED_IPS=
# Multi-account (2 account max, sicurezza-first)
# Se MULTI_ACCOUNT_ENABLED=true, configura almeno ACCOUNT_1_SESSION_DIR.
# Per usare due account, imposta anche ACCOUNT_2_SESSION_DIR.
MULTI_ACCOUNT_ENABLED=false
ACCOUNT_1_ID=acc1
ACCOUNT_1_SESSION_DIR=./data/session_acc1
ACCOUNT_1_PROXY_URL=
ACCOUNT_1_PROXY_USERNAME=
ACCOUNT_1_PROXY_PASSWORD=
ACCOUNT_1_PROXY_TYPE=unknown
ACCOUNT_1_INVITE_WEIGHT=1
ACCOUNT_1_MESSAGE_WEIGHT=1
ACCOUNT_2_ID=acc2
ACCOUNT_2_SESSION_DIR=./data/session_acc2
ACCOUNT_2_PROXY_URL=
ACCOUNT_2_PROXY_USERNAME=
ACCOUNT_2_PROXY_PASSWORD=
ACCOUNT_2_PROXY_TYPE=unknown
ACCOUNT_2_INVITE_WEIGHT=1
ACCOUNT_2_MESSAGE_WEIGHT=1
JOB_STUCK_MINUTES=30
RETRY_MAX_ATTEMPTS=3
RETRY_BASE_MS=1200
INTEGRATION_RETRY_MAX_ATTEMPTS=3
INTEGRATION_RETRY_MAX_DELAY_MS=30000
INTEGRATION_REQUEST_TIMEOUT_MS=10000
INTEGRATION_CIRCUIT_BREAKER_ENABLED=true
INTEGRATION_CIRCUIT_FAILURE_THRESHOLD=5
INTEGRATION_CIRCUIT_OPEN_MS=60000
WORKFLOW_LOOP_INTERVAL_MS=900000
COMPANY_ENRICHMENT_ENABLED=true
COMPANY_ENRICHMENT_BATCH=5
COMPANY_ENRICHMENT_MAX_PROFILES_PER_COMPANY=3
MAX_CONSECUTIVE_JOB_FAILURES=4
MAX_SELECTOR_FAILURES_PER_DAY=8
MAX_RUN_ERRORS_PER_DAY=20
ACCOUNT_MAX_JOBS_PER_RUN=120
# Per migrazione graduale: true permette al primo account di drenare job legacy account_id=default
ACCOUNT_LEGACY_DEFAULT_QUEUE_FALLBACK=false
ACCOUNT_HEALTH_WARN_FAILURE_RATE=0.2
ACCOUNT_HEALTH_CRITICAL_FAILURE_RATE=0.35
ACCOUNT_HEALTH_ALERT_MIN_PROCESSED=5
AUTO_PAUSE_MINUTES_ON_FAILURE_BURST=180
CHALLENGE_PAUSE_MINUTES=180
RETENTION_DAYS=90

# Budget dinamico (valori conservativi anti-ban raccomandati)
SOFT_INVITE_CAP=15
HARD_INVITE_CAP=25
SOFT_MSG_CAP=20
HARD_MSG_CAP=35
WEEKLY_INVITE_LIMIT=80
MESSAGE_SCHEDULE_MIN_DELAY_HOURS=1
MESSAGE_SCHEDULE_MAX_DELAY_HOURS=4

# Compliance guardrails (doctor blocca run-loop/autopilot se violati)
COMPLIANCE_ENFORCED=true
COMPLIANCE_MAX_HARD_INVITE_CAP=20
COMPLIANCE_MAX_WEEKLY_INVITE_LIMIT=100
COMPLIANCE_MAX_HARD_MSG_CAP=40

# Configurazione Hygiene
WITHDRAW_INVITES_ENABLED=true
PENDING_INVITE_MAX_DAYS=30

# Risk engine
RISK_WARN_THRESHOLD=60
LOW_ACTIVITY_ENABLED=true
LOW_ACTIVITY_RISK_THRESHOLD=70
LOW_ACTIVITY_PENDING_THRESHOLD=0.60
LOW_ACTIVITY_BUDGET_FACTOR=0.20
LOW_ACTIVITY_MIN_BUDGET=2
RISK_STOP_THRESHOLD=80
PENDING_RATIO_WARN=0.65
PENDING_RATIO_STOP=0.8
ADAPTIVE_CAPS_ENABLED=true
ADAPTIVE_CAPS_PENDING_WARN=0.55
ADAPTIVE_CAPS_PENDING_STOP=0.72
ADAPTIVE_CAPS_BLOCKED_WARN=0.25
ADAPTIVE_CAPS_MIN_FACTOR=0.25
ADAPTIVE_CAPS_WARN_FACTOR=0.85
COOLDOWN_ENABLED=true
COOLDOWN_WARN_SCORE=68
COOLDOWN_HIGH_SCORE=75
COOLDOWN_PENDING_THRESHOLD=0.65
COOLDOWN_PENDING_HIGH_THRESHOLD=0.75
COOLDOWN_WARN_MINUTES=2880
COOLDOWN_HIGH_MINUTES=4320
NO_BURST_ENABLED=true
NO_BURST_MIN_DELAY_SEC=12
NO_BURST_MAX_DELAY_SEC=45
NO_BURST_LONG_BREAK_EVERY=5
NO_BURST_LONG_BREAK_MIN_SEC=180
NO_BURST_LONG_BREAK_MAX_SEC=600
AUTO_SITE_CHECK_ENABLED=true
AUTO_SITE_CHECK_LIMIT=5
AUTO_SITE_CHECK_FIX=true
AUTO_SITE_CHECK_INTERVAL_HOURS=48
SITE_CHECK_STALE_DAYS=2
POST_RUN_STATE_SYNC_ENABLED=true
POST_RUN_STATE_SYNC_LIMIT=3
POST_RUN_STATE_SYNC_FIX=true
SELECTOR_CANARY_ENABLED=true
OUTBOX_ALERT_BACKLOG=1000

# Alerting Telegram (opzionale)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
SECURITY_SECRET_MAX_AGE_DAYS=90
SECURITY_SECRET_WARN_DAYS=14

# Supabase Control Plane (asincrono)
EVENT_SYNC_SINK=SUPABASE
SUPABASE_SYNC_ENABLED=true
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_SYNC_BATCH_SIZE=100
SUPABASE_SYNC_INTERVAL_MS=15000
SUPABASE_SYNC_MAX_RETRIES=8
SUPABASE_CONTROL_PLANE_ENABLED=false
SUPABASE_CONTROL_PLANE_SYNC_INTERVAL_MS=300000
SUPABASE_CONTROL_PLANE_MAX_CAMPAIGNS=500

# Webhook sink (n8n / Make / Pipedream)
WEBHOOK_SYNC_ENABLED=false
WEBHOOK_SYNC_URL=
WEBHOOK_SYNC_SECRET=
WEBHOOK_SYNC_BATCH_SIZE=100
WEBHOOK_SYNC_TIMEOUT_MS=10000
WEBHOOK_SYNC_MAX_RETRIES=8

# AI (opzionale)
OPENAI_API_KEY=
# Default local-first (OpenAI-compatible endpoint, es. Ollama o gateway locale).
# Con endpoint locale non serve OPENAI_API_KEY.
OPENAI_BASE_URL=http://127.0.0.1:11434/v1
AI_MODEL=llama3.1:8b
# false = blocca endpoint remoti (api.openai.com ecc.). true = opt-in esplicito.
AI_ALLOW_REMOTE_ENDPOINT=false
AI_REQUEST_TIMEOUT_MS=12000
# Abilita personalizzazione AI (messaggi + note invito con INVITE_NOTE_MODE=ai)
AI_PERSONALIZATION_ENABLED=false
# Abilita NLP inbound per intent/sentiment in inbox
AI_SENTIMENT_ENABLED=false
AI_MESSAGE_MAX_CHARS=450
AI_QUALITY_MIN_SAMPLE_SIZE=30
AI_QUALITY_SIGNIFICANCE_ALPHA=0.05
AI_VALIDATION_AUTO_SEED_ENABLED=true
AI_GUARDIAN_ENABLED=false
AI_GUARDIAN_MIN_INTERVAL_MINUTES=60
AI_GUARDIAN_PAUSE_MINUTES=180
# Estrazione opzionale di about/experience dal profilo LinkedIn (default OFF)
PROFILE_CONTEXT_EXTRACTION_ENABLED=false

# Proxy residenziali (opzionale – lasciare vuoto per connessione diretta)
# Esempio BrightData: http://user-country-it-session-123:password@zproxy.lum-superproxy.io:22225
# Esempio IPRoyal: http://user:pass@geo.iproyal.com:12321
# Se PROXY_LIST è valorizzato, ha priorità su PROXY_URL.
# Formati supportati nel file:
#   - http://user:pass@host:port
#   - host:port:user:pass
PROXY_URL=
PROXY_USERNAME=
PROXY_PASSWORD=
PROXY_TYPE_DEFAULT=residential
PROXY_LIST=
# PROXY_LIST può includere un prefisso tipo:
#   mobile|http://user:pass@host:port
#   residential|host:port:user:pass
PROXY_FAILURE_COOLDOWN_MINUTES=30
PROXY_ROTATE_EVERY_JOBS=5
PROXY_ROTATE_EVERY_MINUTES=15
PROXY_MOBILE_PRIORITY_ENABLED=true
PROXY_MOBILE_ESCALATION_FAILURES=2

# JA3 / CycleTLS (opzionale)
USE_JA3_PROXY=false
JA3_PROXY_PORT=8080
JA3_FINGERPRINT=771,4865-4867-4866-49195-49199-52393-52392-49196-49200-49162-49161-49171-49172-51-57-47-53-10,0-23-65281-10-11-35-16-5-51-43-13-45-28-21,29-23-24-25-256-257,0
JA3_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:115.0) Gecko/20100101 Firefox/115.0
JA3_PROXY_UPSTREAM=

# Limiti dinamici da SSI (0-100). Valore letto da sync_state[SSI_STATE_KEY]
SSI_DYNAMIC_LIMITS_ENABLED=true
SSI_STATE_KEY=linkedin_ssi_score
SSI_DEFAULT_SCORE=55
SSI_INVITE_MIN=30
SSI_INVITE_MAX=80
SSI_MESSAGE_MIN=20
SSI_MESSAGE_MAX=40

# Inviti con nota personalizzata
# INVITE_WITH_NOTE=true → aggiunge una nota breve all'invito (raccomandato anti-ban)
# INVITE_NOTE_MODE=template → usa i template predefiniti (veloce, gratis)
# INVITE_NOTE_MODE=ai → usa OpenAI per generare la nota (richiede OPENAI_API_KEY)
INVITE_WITH_NOTE=false
INVITE_NOTE_MODE=template

# Sales Navigator sync (lista -> DB)
SALESNAV_SYNC_ENABLED=false
SALESNAV_SYNC_LIST_NAME=default
SALESNAV_SYNC_LIST_URL=
SALESNAV_SYNC_MAX_PAGES=3
SALESNAV_SYNC_INTERVAL_HOURS=24
SALESNAV_SYNC_LIMIT=30
SALESNAV_SYNC_ACCOUNT_ID=

# Attività random opzionali (home/notifiche/rete/impostazioni/profili)
RANDOM_ACTIVITY_ENABLED=false
RANDOM_ACTIVITY_PROBABILITY=0.15
RANDOM_ACTIVITY_MAX_ACTIONS=3
INTER_JOB_MIN_DELAY_SEC=45
INTER_JOB_MAX_DELAY_SEC=90
DECOY_MIN_INTERVAL_JOBS=3
DECOY_MAX_INTERVAL_JOBS=5
COFFEE_BREAK_MIN_INTERVAL_JOBS=10
COFFEE_BREAK_MAX_INTERVAL_JOBS=15
COFFEE_BREAK_MIN_SEC=180
COFFEE_BREAK_MAX_SEC=420
CONTEXTUAL_PAUSE_MIN_MS=900
CONTEXTUAL_PAUSE_MAX_MS=4200
MONDAY_LOW_ACTIVITY_FACTOR=0.7
MONDAY_LOW_ACTIVITY_START_HOUR=9
MONDAY_LOW_ACTIVITY_END_HOUR=12
FRIDAY_LOW_ACTIVITY_FACTOR=0.75
FRIDAY_LOW_ACTIVITY_START_HOUR=15
FRIDAY_LOW_ACTIVITY_END_HOUR=18
RISK_PREDICTIVE_ALERTS_ENABLED=true
RISK_PREDICTIVE_LOOKBACK_DAYS=7
RISK_PREDICTIVE_SIGMA=2

# Plugin system security
# Directory plugin (default ./plugins). Deve ricadere in PLUGIN_DIR_ALLOWLIST.
PLUGIN_DIR=./plugins
# Allowlist directory plugin (CSV, path relative/assoluti)
PLUGIN_DIR_ALLOWLIST=./plugins
# Allowlist nomi plugin (CSV). Vuoto = nessuna restrizione sui nomi.
PLUGIN_ALLOWLIST=
# Per sicurezza i plugin TypeScript sono caricati solo con opt-in esplicito.
PLUGIN_ALLOW_TS=false
